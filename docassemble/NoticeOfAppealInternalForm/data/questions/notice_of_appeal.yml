# Trying to get interview to not ask for 2/3 variables (extrainious fields on pdf)- lines 252-258 (#'d out rn)
---
include:
  - docassemble.AssemblyLine:al_package.yml
  - docassemble.ALMassachusetts:al_massachusetts.yml
  - docassemble.MassAccess:massaccess.yml
---
metadata:
  title: |
    Notice of the Assembly of the Record on Appeal Appellate Court Entry Statement
  short title: |
    Notice of Assembly
  tags:
    - Other
  authors:
    - Hayden McGuire
---
mandatory: True
comment: |
  Global interview metadata
variable name: interview_metadata["notice_of_appeal"]
data:
  al_weaver_version: "1.6.3"
  generated on: "2022-06-02"
  title: >-
    Notice of the Assembly of the Record on Appeal Appellate Court Entry Statement
  short title: >-
    Notice of Assembly
  description: |-
    This is an internal document for the courts for judgments on appeal.
  original_form: >-
    
  allowed courts: 
    - "Appeals Court"
    - "Appellate Tax Board"
    - "Boston Municipal Court"
    - "Dept. of Industrial Accidents"
    - "Dept. of Employment and Training"
    - "District Court"
    - "District Court Appellate Division"
    - "Employment Relations Board"
    - "Housing Court"
    - "Juvenile Court"
    - "Land Court"
    - "Probate and Family Court"
    - "Superior Court"
  categories:
    - "Internal Appeals Forms"
  typical role: "na"
  generate download screen: True
---
code: |
  interview_metadata['main_interview_key'] =  'notice_of_appeal'
---
code: |
  # This controls the default country and list of states in address field questions
  AL_DEFAULT_COUNTRY = "US"
---
code: |
  # This controls the default state in address field questions
  AL_DEFAULT_STATE = "MA"
---
code: |
  github_repo_name =  'docassemble-NoticeOfAppeal'
---
code: |
  interview_short_title = "Stating appeal of judgment"
---
code: |
  al_form_type = "appeal" 
---
objects:
  - users: ALPeopleList.using(ask_number=True,target_number=1)
---
sections:
  - review_notice_of_appeal: Review your answers
---
#################### Interview order #####################
comment: |
  Controls order and branching logic for questions specific to this form
id: interview_order_notice_of_appeal
code: |
  # Set the allowed courts for this interview
  
  allowed_courts = interview_metadata["notice_of_appeal"]["allowed courts"]
  nav.set_section('review_notice_of_appeal')
  user_role = 'na'
  #form_entry_statement_flag
  trial_docket_number
  impounded_info
  set_progress(20)
  appeal_file_date
  trial_court.department
  attorneys.gather()
  set_progress(40)
  users.gather()
  set_parts(subtitle=str(users))
  signature_date
  set_progress(60)
  #form_entry_statement_case
  interview_order_notice_of_appeal = True
---
###################### Main order ######################
mandatory: true
comment: |
  This block includes the logic for standalone interviews.
  Delete mandatory: True to include in another interview
code: |
  al_intro_screen
  notice_of_appeal_intro
  type_of_appeal
  if type_of_appeal == 'Civil Case, Full Bench Appeal from a Judgment, Mass. R. A. P. 4(a)':
    civil_case
  if type_of_appeal == 'Criminal Case, Mass. R. A. P. 4(b)':
    criminal_case
  if type_of_appeal == 'Summary Process Case, Full Bench Appeal from a Judgment, G. L. c. 239, § 5':
    full_bench_summary_process
  if type_of_appeal == 'Summary Process Case, Single Justice Appeal Regarding Appeal Bond, G. L. c. 239, § 5':
    single_justice_summary_process
  if type_of_appeal == 'Finding Concerning Indigency, Single Justice Appeal, G. L. c. 261, § 27D':
    finding_concerning_indigency
  if type_of_appeal == 'Attorney’s Fees for Frivolous Case, Single Justice Appeal, G. L. c. 231, § 6G':
    fee_frivolous_case
  if type_of_appeal == 'Procedural Amount Dismissals, Single Justice Appeal, G. L. c. 212, § 3A and G. L. c. 218, § 19A':
    procedural_amount_dismissals
  exhibit_attachment.exhibits.gather()
  interview_order_notice_of_appeal
  signature_date    
  # Save anonymized interview statistics (customize the saved data below)
  store_variables_snapshot(data={'zip': users[0].address.zip})    
  notice_of_appeal_preview_question
  basic_questions_signature_flow    
  notice_of_appeal_download
---
comment: |
  This question is used to introduce your interview. Please customize
id: Notice_of_the_Assembly_of_the_Record_on_Appeal_Appellate_Court_Entry_Statement
continue button field: notice_of_appeal_intro
question: |
  Form: **Notice of the Assembly of the Record on Appeal Appellate Court Entry Statement**
subquestion: |
  This interview will guide you through filling the **"Notice of the Assembly of the Record on Appeal Appellate Court Entry Statement" (Notice of Appeal).** It is a form that is part of a total package that will be sent to the chosen court upon the completion of this guided interview. 
  
  This is an internal procedure that is intended to group up and deliver all pertinent documents and information for a matter that is going through the appeals process.
---
#id: USELESS
#question: |
#  USELESS
#fields:
#  - "Useless": form_entry_statement_flag
#    maxlength: 186
#  - "Useless": form_statement_court_county
#    maxlength: 28
#  - "useless": form_statement_court
#    maxlength: 23
#  - "useless": statement_district_court
#    maxlength: 23
---
id: Trial Court Information
question: |
  Trial Court Information
subquestion: |
  Please provide all the requested information about the Trial Court proceedings.
fields:
  - "Trial Court docket numbers": trial_docket_number
    maxlength: 148
  - "Case Name": case_name
    maxlength: 168
  - "Nature of the case": case_nature
    input type: combobox
    choices:
      - Abuse Prevention Order
      - Administrative Law
      - Appellate Tax Board
      - Arbitration
      - Business/Commercial
      - Child Welfare/DCF/Adoption
      - Civil Forfeiture
      - Civil Motor Vehicle Infractions
      - Civil Service
      - Contract
      - Domestic Relations/Family Law
      - Employment Law/Discrimination
      - Environmental, G. L. c. 21E
      - Equity
      - Government/Municipality
      - Impoundment
      - Insurance Law
      - Labor Law/Employment Relations Board
      - Land Use
      - Legal or Non-Medical Malpractice
      - Medical Malpractice
      - Mortgage/Foreclosure Law
      - Prisoners Rights and Claims
      - Probate law
      - Real Estate
      - Sex Offender Registry Board
      - Sexually Dangerous Person Proceeding
      - Tort
      - Workers Compensation
      - Crime Against Property
      - Juvenile Delinquency/Youthful Offender
      - Manslaughter
      - Motor Vehicle Offense
      - Murder, 2nd Degree
      - Possession - Drugs
      - Possession - Guns
      - Possession - Pornography
      - Possession - Other, please specify ____
      - Probation/Restitution
      - Public Order Offense
      - Reported Question
      - Sealing/Expungement
      - Sexual Offense
      - Other, please specify ___
  - "Date Petition, Complaint or Indictment Entered into Trial Court": petitions_date
    datatype: date
---
id: Impounded Information
question: |
  Is ${case_name} or any information impounded?
subquestion: |
  If yes, attach a copy of the order of impoundment or provide the citation to the statute or rule pursuant to which the documents were impounded, and specify each impounded document. **See S.J.C. Rule 1:15, § 2(a)**.
fields:
  - "Is there impounded information?": impounded_info
    input type: combobox
    choices:
      - Yes
      - No
      - Partially Impounded
  - "Description of impounded information": impounded_info_desc
    maxlength: 90
    help: |
      If there is no impounded information type N/A into description field.
---
id: appeals court information
question: |
  Appeals Court Information
subquestion: |
  Please provide any requested information about the Court of Appeals proceedings.
fields:
  - "Date when appeal was filed": appeal_file_date
    datatype: date
    help: |
      Please select the date when the appeal was initially filled for. 
  - "Order or judgment on appeal": judgment_on_appeal
    maxlength: 186
    help: |
      Please input the XYZ?
  - "Date transcripts ordered": transcripts_date
    datatype: date
  - "Number of transcript volumes": transcripts_numbers
    datatype: number
  - "Are you attaching CDs with PDFs of the Transcript": yes
    datatype: yesno
  - "Date of transcribed proceedings": transcription_date
    datatype: date
  - "For Criminal Cases, has a Stay of Execution of Sentence been granted": no_2
    datatype: yesno
  #- "Date entered in S.J.C or Appeals Court": appeal_entry_date
  #  datatype: date
  #- "SJC or Appeals Court Docket Number": docket2_number
  #  maxlength: 42
  #- "Signature": form_entry_statement_case
  #  input type: area
  #  maxlength: 13
---
id: preview notice_of_appeal
question: |
  Preview your form before you sign it
subquestion: |
  Here is a preview of the form you will sign on the next page.   
  
  ${ al_court_bundle.as_pdf(key='preview') }

  Click the image to open it in a new tab. Click the "Edit answers" button
  to edit your answers.

  ${ action_button_html(url_action('review_notice_of_appeal'), label='Edit answers', color='info') }
  
  Remember to come back to this window to continue and sign your form.
continue button field: notice_of_appeal_preview_question    
---
#code: |
#  signature_fields = ['form_entry_statement_case']
---
code: |
  # This is a placeholder for the addresses that will be searched
  # for matching address to court. Edit if court venue is based on 
  # a different address than the user's
  addresses_to_search = [user.address for user in users]
---
# got it to run (FINALLY) - i think itd be better if it asks for document names. could just pull the type_of_appeal and then show the required/optional attachments. 
generic object: ALExhibitList
id: any exhibits
question: |
  % if al_form_type in ['starts_case','existing_case','appeal']:
  Please attach the required documents for your appeal type.
  % else:
  Do you have any documents that you want to attach to this form?
  % endif
fields:
  - Do you have any documents you want to upload?: x.has_exhibits
    datatype: yesnoradio
  - note: |
      **Okay**. You will have a chance to upload multiple documents. 
      You can also add additional pages to this document.
    show if: x.has_exhibits
  - First document title: x[0].title
    maxlength: 60 # longer might break TOC
    show if: x.has_exhibits    
  - Upload the first document: x[0].pages
    show if: x.has_exhibits    
    datatype: files
    maximum image size: 1024
    image upload type: jpeg        
    accept: |
      "image/png, image/jpeg, .doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/pdf,.pdf"   
validation code: |
  if x.has_exhibits:
    if sum(exhibit.size_in_bytes() for exhibit in x[0].pages) > (15 * 1024 * 1024):
      validation_error("Upload a file smaller than 15 MB.")
    try:
      pdf_concatenate(x[0].pages)
    except:
      validation_error("Unable to convert this file. Please upload a new one.", field="x[0].pages")
    x[0].pages.reset_gathered()  # docassemble sets this attribute but we want to force gathering additional pages
---
id: selection_of_matter_on_appeal
question: |
 Please select the case type or judgment type on review. 
subquestion:  |
  After selection you will be informed of all required documents to attach, please ensure you have them all ready before proceeding with the interveiw.

  If you need help answering this question please click "Help" in the upper-left of the interview screen.
field: type_of_appeal
help: |
   You are being asked to select the kind of case that is being appealed. Civil, Criminal, Housing, Probate and Family, etc.
dropdown:
   -  Civil Case, Full Bench Appeal from a Judgment, Mass. R. A. P. 4(a)
   -  Criminal Case, Mass. R. A. P. 4(b)
   -  Summary Process Case, Full Bench Appeal from a Judgment, G. L. c. 239, § 5
   -  Summary Process Case, Single Justice Appeal Regarding Appeal Bond, G. L. c. 239, § 5
   -  Finding Concerning Indigency, Single Justice Appeal, G. L. c. 261, § 27D
   -  Attorney’s Fees for Frivolous Case, Single Justice Appeal, G. L. c. 231, § 6G
   -  Procedural Amount Dismissals, Single Justice Appeal, G. L. c. 212, § 3A and G. L. c. 218, § 19A   
---
event: civil_case
question: |
  You selected, Civil Case, Full Bench Appeal from a Judgment, Mass. R. A. P. 4(a), please see the required attachments for a succesful Notice of Appeal filling. 
subquestion: |  
  In addition to completing this Notice of Assembley form, you will need to attach:
  
  * Completed **Appellate Court Entry Statement** including notification of any impounded material;
  * Copy of the notice of assembly issued to the parties;
  * Copy of the notice(s) of appeal;
  * Copy of any order of impoundment;
  * Copy of docket entries; and
  * A list of the exhibits, if any **(do not send the exhibits themselves unless specifically requested by the Appelas Court)**
  * If it is a care and protection case, a copy of the judge's findings and rulings. 

  **If you have the listed documents please click continue.**
continue button field: civil_case
---
event: criminal_case
question: |
  You selected, **Criminal Case, Mass. R. A. P. 4(b)**, please see the required attachments for a succesful Notice of Appeal filling. 
subquestion: |  
  In addition to completing this Notice of Assembley form, you will need to attach:
  
  * Completed **Appellate Court Entry Statement** including notification of any impounded material;
  * Copy of the notice of assembly issued to the parties;
  * Copy of the notice(s) of appeal;
  * Copy of any order of impoundment;
  * Copy of docket entries;
  * A list of the exhibits, if any **(do not send the exhibits themselves unless specifically requested by the Appelas Court)**
  * An electronically formatted transcript, if necessary for the appeal.
continue button field: criminal_case
---
event: full_bench_summary_process
question: |
  You selected, **Summary Process Case, Full Bench Appeal from a Judgment, G. L. c. 239, § 5**, please see the required attachments for a succesful Notice of Appeal filling. 
subquestion: |
  In addition to completing this Notice of Assembley form, you will need to attach:
  
  * Completed **Appellate Court Entry Statement** including notification of any impounded material;
  * Copy of the notice of assembly issued to the parties;
  * Copy of the notice(s) of appeal;
  * Copy of any order of impoundment;
  * Copy of docket entries;
  * A list of the exhibits, if any **(do not send the exhibits themselves unless specifically requested by the Appelas Court)**
continue button field: full_bench_summary_process
---
event: single_justice_summary_process
question: |
  You selected, **Summary Process Case, Single Justice Appeal Regarding Appeal Bond, G. L. c. 239, § 5**, please see the required attachments for a succesful Notice of Appeal filling. 
subquestion: |
  In addition to completing this Notice of Assembley form, you will need to attach:

  * Completed **Appellate Court Entry Statement** including notification of any impounded material;
  * Copy of the notice of assembly issued to the parties;
  * Copy of the docket entries;
  * Copy of any order of impoundment;
  * Copy of the original judgment and summary process findings;
  * Copy of the notice of appeal from the original judgment;
  * Copy of the motion to waive appeal bond (and opposition, if any);
  * Copy of the affidavit of indigency;
  * Copy of the judge's order concerning the bond;
  * Copy of the request for review of orders/notice of appeal; and
  * Copy of any other document deemed relevant to the bond appeal.
continue button field: single_justice_summary_process
---
event: finding_concerning_indigency
question: |
  You selected, **Finding Concerning Indigency, Single Justice Appeal, G. L. c. 261, § 27D**, please see the required attachments for a succesful Notice of Appeal filling. 
subquestion: |
  In addition to completing this Notice of Assembley form, you will need to attach:
  
  * Completed **Appellate Court Entry Statement** including notification of any impounded material;
  * Copy of the notice of assembly issued to the parties;
  * Copy of the notice of appeal under G. L. c. 261, § 27D;
  * Copy of the docket entries (if the fees in question relate to the entry of a new case, no docket sheets are involved);
  * Applicable copy of the affidavit of indigency filed with the Trial Court;
  * Applicable copy of any motion or other request for waiver, substitution or payment by the commonwealth of fees and costs;
  * Applicable copy of a clerk’s referral to a judge; and
  * A copy of judge’s finding concerning G. L. c. 261, § 27D determination.
continue button field: finding_concerning_indigency
---
event: fee_frivolous_case
question: |
  You selected, **Attorney’s Fees for Frivolous Case, Single Justice Appeal, G. L. c. 231, § 6G**, please see the required attachments for a succesful Notice of Appeal filling. 
subquestion: |
  In addition to completing this Notice of Assembley form, you will need to attach:
  
  * Completed **Appellate Court Entry Statement** including notification of any impounded material;
  * Copy of the notice of assembly issued to the parties;
  * Copy of the notice of appeal under G. L. c. 231, § 6G;
  * Copy of the docket entries;
  * Copy of the original judgment (and any findings and rulings) in the case, if judgment has entered;
  * Copy of the motion for attorney’s fees (and opposition, if any);
  * Copy of the judge’s findings and order concerning the motion for fees; and
  * Copy of any other document deemed relevant to the attorney’s fees appeal.
continue button field: fee_frivolous_case
---
event: procedural_amount_dismissals
question: |
  You selected, **Procedural Amount Dismissals, Single Justice Appeal**, please see the required attachments for a succesful Notice of Appeal filling. 
subquestion: |
  In addition to completing this Notice of Assembley form, you will need to attach:

  * Completed **Appellate Court Entry Statement** including notification of any impounded material;
  * Copy of the notice of assembly issued to the parties;
  * Copy of the notice of appeal under G. L. c. 212, § 3A or G. L. c. 218, § 19A;
  * Copy of the docket entries;
  * Copy of the complaint;
  * Copy of any statement of the parties specifying the plaintiff’s potential damages;
  * Copy of the judge’s findings and rulings justifying the dismissal;
  * Copy of any other document deemed relevant to the procedural amount dismissal appeal.
continue button field: procedural_amount_dismissals
---
id: notice of appeal review screen
event: review_notice_of_appeal
question: |
  Review your answers
review:
#  - Edit: form_entry_statement_flag
#    button: |
#      **Useless**:
#      ${ form_entry_statement_flag }
#  - Edit: form_statement_court_county
#    button: |
#      **Useless**:
#      ${ form_statement_court_county }
#  - Edit: form_statement_court
#    button: |
#      **useless**:
#      ${ form_statement_court }
#  - Edit: statement_district_court
#    button: |
#      **useless**:
#      ${ statement_district_court }
  - Edit: trial_docket_number
    button: |
      **Trial Court docket numbers**:
      ${ trial_docket_number }
  - Edit: case_name
    button: |
      **Case Name**:
      ${ case_name }
  - Edit: case_nature
    button: |
      **Nature of the case**:
      ${ case_nature }
  - Edit: petitions_date
    button: |
      **Date Petition, Complaint or Indictment Entered into Trial Court**:
      ${ petitions_date }
  - Edit: impounded_info
    button: |
      **Is there impounded information?**:
      ${ word(yesno(impounded_info)) }
  - Edit: impounded_info_desc
    button: |
      **Description of impounded information**:
      ${ impounded_info_desc }
  - Edit: appeal_file_date
    button: |
      **Date when appeal was filed**:
      ${ appeal_file_date }
  - Edit: judgment_on_appeal
    button: |
      **Order or judgment on appeal**:
      ${ judgment_on_appeal }
  - Edit: transcripts_date
    button: |
      **Date transcripts ordered**:
      ${ transcripts_date }
  - Edit: transcripts_numbers
    button: |
      **Number of transcript volumes**:
      ${ transcripts_numbers }
  - Edit: yes
    button: |
      **Yes**:
      ${ word(yesno(yes)) }
  - Edit: no_1
    button: |
      **No**:
      ${ word(yesno(no_1)) }
  - Edit: transcription_date
    button: |
      **Date of transcribed proceedings**:
      ${ transcription_date }
  - Edit: no_2
    button: |
      **For Criminal Cases, has a Stay of Execution of Sentence been granted**:
      ${ word(yesno(no_2)) }
  - Edit: appeal_entry_date
    button: |
      **Date entered in S.J.C or Appeals Court**:
      ${ appeal_entry_date }
  - Edit: docket2_number
    button: |
      **SJC or Appeals Court Docket Number**:
      ${ docket2_number }
#  - Edit: form_entry_statement_case
#    button: |
#      **Signature**:
#      > ${ single_paragraph(form_entry_statement_case) }
  - Edit: trial_court
    button: |
      **trial_court**

      % if defined("trial_court.department"):
      * department: ${ trial_court.department }
      % endif
  - Edit: attorneys.revisit
    button: |
      **Attorneys**

      % for item in attorneys:
        * ${ item }
      % endfor
  - Edit: users.revisit
    button: |
      **Users**

      % for item in users:
        * ${ item }
      % endfor
  - Edit: signature_date
    button: |
      **signature_date**:
      ${ signature_date }
---
continue button field: attorneys.revisit
question: |
  Edit attorneys
subquestion: |
  ${ attorneys.table }

  ${ attorneys.add_action() }
---
table: attorneys.table
rows: attorneys
columns:
  - Name: |
      row_item.name.full() if defined("row_item.name.first") else ""
edit:
  - name.first
confirm: True

---
continue button field: users.revisit
question: |
  Edit users
subquestion: |
  ${ users.table }

  ${ users.add_action() }
---
table: users.table
rows: users
columns:
  - Name: |
      row_item.name.full() if defined("row_item.name.first") else ""
edit:
  - name.first
confirm: True

---
id: download notice_of_appeal
event: notice_of_appeal_download
question: |
  All done
subquestion: |
  Thank you ${users}. Your form is ready to download and deliver.
  
  View, download and send your form below. Click the "Edit answers" button to fix any mistakes.

  ${ action_button_html(url_action('review_notice_of_appeal'), label='Edit answers', color='info') }
  
  
  ${ al_user_bundle.download_list_html() }
  

  ${ al_user_bundle.send_button_html(show_editable_checkbox=False) }

progress: 100
---
objects:
  - notice_of_appeal_post_interview_instructions: ALDocument.using(title="Instructions", filename="notice_of_appeal_next_steps.docx", enabled=True, has_addendum=False, default_overflow_message=AL_DEFAULT_OVERFLOW_MESSAGE)
  - notice_of_appeal_attachment: ALDocument.using(title="Notice of the Assembly of the Record on Appeal Appellate Court Entry Statement", filename="notice_of_appeal.pdf", enabled=True, has_addendum=False, default_overflow_message=AL_DEFAULT_OVERFLOW_MESSAGE)
  - exhibit_attachment: ALExhibitDocument.using(
         title="Exhibits",
         filename="exhibits",
         add_page_numbers=True,
         include_table_of_contents=True,
         include_exhibit_cover_pages=True,
       )
---
objects:
  - al_user_bundle: ALDocumentBundle.using(elements=[notice_of_appeal_post_interview_instructions,notice_of_appeal_attachment], filename="notice_of_appeal.pdf_package.pdf", title="All forms to download for your records", enabled=True)
  - al_court_bundle: ALDocumentBundle.using(elements=[notice_of_appeal_attachment], filename="notice_of_appeal.pdf_package.pdf", title="All forms to download for your records", enabled=True)
---
attachments:
  - name: notice of appeal post interview instructions
    filename: Post-interview-instructions     
    variable name: notice_of_appeal_post_interview_instructions[i]        
    skip undefined: True
    docx template file: notice_of_appeal_next_steps.docx
  - name: notice of appeal attachment
    filename: notice_of_appeal.pdf     
    variable name: notice_of_appeal_attachment[i]        
    skip undefined: True
    pdf template file: notice_of_appeal.pdf
    fields:
      - "trial_court_department": ${ trial_court.department }
      - "attorneys1_name": ${ attorneys[0] }
      - "attorneys2_name": ${ attorneys[1] }
      - "users1_name": ${ users[0] }
      - "signature_date": ${ signature_date }
#      - "form_entry_statement_flag": ${ form_entry_statement_flag }
#      - "form_statement_court_county": ${ form_statement_court_county }
#      - "form_statement_court__2": ${ form_statement_court }
#      - "statement_district_court": ${ statement_district_court }
      - "trial_docket_number": ${ trial_docket_number }
      - "case_name": ${ case_name }
      - "case_nature": ${ case_nature }
      - "petitions_date": ${ petitions_date }
      - "impounded_info": ${ impounded_info }
      - "impounded_info_desc": ${ impounded_info_desc }
      - "appeal_file_date": ${ appeal_file_date }
      - "judgment_on_appeal": ${ judgment_on_appeal }
      - "transcripts_date": ${ transcripts_date }
      - "transcripts_numbers": ${ "{:,.2f}".format(transcripts_numbers) }
      - "yes__1": ${ yes }
      - "yes__2": ${ yes }
      - "no_1": ${ no_1 }
      - "transcription_date": ${ transcription_date }
      - "no_2": ${ no_2 }
      - "appeal_entry_date": ${ appeal_entry_date }
      - "docket2_number": ${ docket2_number }
      - "form_entry_statement_case__7": ${ form_entry_statement_case }
      # It's a signature: test which file version this is; leave empty unless it's the final version)
      - "form_entry_statement_case__6": ${ form_entry_statement_case if i == 'final' else '' }
